# ğŸ” LeetCode 230 â€“ Kth Smallest Element in a BST
ğŸ”— é¡Œç›®é€£çµï¼š[https://leetcode.com/problems/kth-smallest-element-in-a-bst/](https://leetcode.com/problems/kth-smallest-element-in-a-bst/)

---

## ğŸ“„ é¡Œç›®èªªæ˜ | Problem Description

**ä¸­æ–‡**ï¼š

çµ¦ä½ ä¸€æ£µäºŒå…ƒæœå°‹æ¨¹ï¼ˆBSTï¼‰çš„æ ¹ç¯€é» `root` å’Œä¸€å€‹æ•´æ•¸ `k`ï¼Œè«‹å›å‚³ BST ä¸­ç¬¬ k å°çš„ç¯€é»å€¼ï¼ˆä»¥ 1 ç‚ºèµ·å§‹ç´¢å¼•ï¼‰ã€‚ 

**English**: 

Given the root of a Binary Search Tree (BST) and an integer `k`, return the *k-th smallest* value of all the node values in the BST. The counting is 1-indexed.

### Examples
- Example 1:

![](../images/230_kthtree1.jpg)

    Input: root = [3,1,4,null,2], k = 1
    Output: 1

- Example 2:

![](../images/230_kthtree2.jpg)

    Input: root = [5,3,6,2,4,null,null,1], k = 3

    Output: 3

---

## ğŸ§  è§£é¡Œæ€è·¯ | Solution Idea

åœ¨ BST ä¸­ï¼Œä¸­åºéæ­·ï¼ˆIn-order Traversalï¼‰æœƒä¾ã€Œå¾å°åˆ°å¤§ã€çš„é †åºè¨ªå•ç¯€é»ã€‚å› ç‚º BST çš„ç‰¹æ€§ï¼šå·¦é‚Šå­æ¨¹çš„æ‰€æœ‰å€¼ < ç¯€é»å€¼ < å³é‚Šå­æ¨¹çš„æ‰€æœ‰å€¼ã€‚æ‰€ä»¥ä¸­åºéæ­·æ˜¯å–å¾—æ’åºçµæœçš„ä¸€ç¨®è‡ªç„¶æ–¹æ³•ã€‚

æˆ‘å€‘å¯ä»¥åˆ©ç”¨é€™æ¨£çš„ç‰¹æ€§ä¾†åœæ­¢æ—©ä¸€é»ï¼Œä¸å¿…éæ­·æ•´æ£µæ¨¹ï¼š

1. ç”¨éè¿´ æˆ– ç”¨ stack + è¿´åœˆçš„æ–¹å¼åšä¸­åºéæ­·ã€‚  
2. æ¯è¨ªå•ä¸€å€‹ç¯€é»å°±è¨ˆæ•¸ (ä¾‹å¦‚ `count += 1`)ã€‚  
3. ç•¶è¨ˆæ•¸åˆ° `k` æ™‚ï¼Œå°±å›å‚³è©²ç¯€é»çš„å€¼ï¼Œåœæ­¢éæ­·ã€‚  
4. å¦‚æœéæ­·å®Œæ•´æ£µæ¨¹éƒ½é‚„æ²’åˆ° `k`ï¼Œé‚£é¡Œç›®æ¢ä»¶å…¶å¯¦ä¿è­‰ k åˆæ³•ï¼Œæ‰€ä»¥é€™æƒ…æ³ä¸€èˆ¬ä¸æœƒç™¼ç”Ÿã€‚

---

## ğŸ’» ç¨‹å¼ç¢¼å¯¦ä½œ | Code (Python)

```python
from typing import Optional

class TreeNode:
    def __init__(self, val: int = 0, left: Optional['TreeNode'] = None, right: Optional['TreeNode'] = None):
        self.val = val
        self.left = left
        self.right = right

class Solution:
    def kthSmallest(self, root: Optional[TreeNode], k: int) -> int:
        # stack ç”¨æ–¼æ¨¡æ“¬éè¿´ä¸­åºéæ­·
        stack = []
        current = root

        while True:
            # ä¸€ç›´å¾€å·¦èµ°ï¼ŒæŠŠç¯€é»æ¨é€² stack
            while current:
                stack.append(current)
                current = current.left

            # stack é ‚ç«¯çš„æ˜¯ç•¶å‰æœ€å°çš„æœªè¨ªå•ç¯€é»
            current = stack.pop()
            k -= 1
            if k == 0:
                return current.val

            # è¨ªå•å®Œç¯€é»ä¹‹å¾Œè½‰åˆ°å®ƒçš„å³å­æ¨¹ç¹¼çºŒ
            current = current.right
```
```python
stack = []
current = root
```
- ç”¨ stack ä¾†æ¨¡æ“¬éè¿´éç¨‹ã€‚

- current æ˜¯ç”¨ä¾†éæ­·æ•´æ£µæ¨¹çš„æŒ‡æ¨™ã€‚
### ğŸ“Œ ä¸»è¿´åœˆï¼šæŒçºŒéæ­·ç›´åˆ°æ‰¾åˆ°ç¬¬ k å°ç¯€é»
```python
while True:
```
- ä½¿ç”¨ while True æ˜¯å› ç‚ºæˆ‘å€‘ä¿è­‰ BST æœ‰è‡³å°‘ k å€‹ç¯€é»ã€‚

- å…§éƒ¨æœ‰æ¢ä»¶é€€å‡ºã€‚
### ğŸ‘‰ å‘å·¦èµ°åˆ°åº•ï¼šå…ˆèµ°å®Œæ•´å€‹å·¦å­æ¨¹
```python
while current:
    stack.append(current)
    current = current.left
```
- ä¸€ç›´å°‡å·¦å­ç¯€é»å£“å…¥ stackï¼Œç›´åˆ°æ²’æœ‰å·¦ç¯€é»ã€‚

- é€™æ­¥ç¢ºä¿æˆ‘å€‘æŒ‰ç…§ BST ä¸­åºé †åºï¼šå¾æœ€å°å€¼é–‹å§‹èµ°ã€‚
### ğŸ¯ æ‹¿å‡º stack é ‚ç«¯ç¯€é»ï¼ˆæœ€å°ï¼‰
```python
current = stack.pop()
k -= 1
if k == 0:
    return current.val
```
- æ¯ pop ä¸€å€‹ç¯€é»ä»£è¡¨è¨ªå•åˆ°ä¸€å€‹å€¼ã€‚

- å¦‚æœé€™æ˜¯ç¬¬ k å€‹è¨ªå•åˆ°çš„å€¼ï¼Œå°± return å›å‚³å®ƒã€‚
### ğŸ‘‰ æ¢ç´¢å³å­æ¨¹
```python
current = current.right
```
- è¨ªå•å®ŒæŸç¯€é»å¾Œï¼Œè¦å¾€å®ƒçš„å³å­æ¨¹æ¢ç´¢ã€‚

- æ¥è‘—å³å­æ¨¹åˆæœƒé–‹å§‹èµ°ã€Œå·¦ â†’ æ ¹ â†’ å³ã€çš„æµç¨‹ã€‚

---

## ğŸ§ª ç¯„ä¾‹
å‡è¨­æœ‰ä¸€æ£µ BST å¦‚ä¸‹ï¼š
```markdown
       5
      / \
     3   7
    / \   \
   1   4   9
```
æˆ‘å€‘è¨­å®š k = 3ï¼ˆæ‰¾ç¬¬ 3 å°çš„ç¯€é»å€¼ï¼‰ã€‚

| æ­¥é©Ÿ | stack ç‹€æ…‹      | current ç¯€é»          | k å€¼ | å‹•ä½œèªªæ˜                       | å·²è¨ªå•é †åº     |
| -- | ------------- | ------------------- | --- | -------------------------- | --------- |
| åˆå§‹ | `[]`          | `5`                 | 3   | é–‹å§‹ï¼Œcurrent ä¸ç‚º Noneï¼Œå¾€å·¦æ¨é€²    | â€”         |
| 1  | `[5]`         | `3` â†’ `[5,3]` â†’ `1` | 3   | å¾ 5 æ¨åˆ°å·¦å­ 3ï¼Œå†åˆ° 1            | â€”         |
| 2  | `[5,3,1]`     | `current = None`    | 3   | åˆ°æœ€å·¦é‚Šå¾Œ inner while çµæŸ       | â€”         |
| 3  | pop â†’ `1`     | â€”                   | 2   | å–å‡ºæœ€å°ç¯€é» 1ï¼Œé€™æ˜¯ç¬¬ 1 å°           | 1         |
| 4  | `[5,3]`       | `1.right = None`    | 2   | å³å­ Noneï¼Œæ‰€ä»¥ current â†’ None  | â€”         |
| 5  | pop â†’ `3`     | â€”                   | 1   | å–å‡ºç¯€é» 3ï¼Œæ˜¯ç¬¬ 2 å°              | 1 â†’ 3     |
| 6  | current â†’ `4` | move to 3.right çš„ 4 | 1   | æ¢å³å­æ¨¹                       | â€”         |
| 7  | `[5,4]`       | then 4.left = None  | 1   | å¾€å·¦ (4 æ²’å·¦å­)ï¼Œinner while æ¨ä¸å‹• | â€”         |
| 8  | pop â†’ `4`     | â€”                   | 0   | ç¬¬ 3 æ¬¡ popï¼Œk è®Š 0 â†’ return 4 | 1 â†’ 3 â†’ 4 |

### âœ” çµæœ

- ç•¶ k æ¸›åˆ° 0 çš„é‚£ä¸€åˆ»ï¼Œæˆ‘å€‘ pop å‡ºä¾†çš„æ˜¯ç¯€é»å€¼ 4ï¼Œæ‰€ä»¥ç¬¬ 3 å°çš„å€¼æ˜¯ 4ã€‚

---

## â± è¤‡é›œåº¦åˆ†æ | Time & Space Complexity
| åˆ†é¡          | è¤‡é›œåº¦                                                            |
| ----------- | -------------------------------------------------------------- |
| æ™‚é–“è¤‡é›œåº¦ Time  | **O(h + k)**ï¼Œh æ˜¯æ¨¹çš„é«˜åº¦ã€‚å› ç‚ºä½ å¯èƒ½è¦ä¸€è·¯å¾ root å»æœ€å·¦é‚Šï¼ˆcost \~hï¼‰ï¼Œç„¶å¾Œè¨ªå• k å€‹ç¯€é»ã€‚ |
| ç©ºé–“è¤‡é›œåº¦ Space | **O(h)**ï¼Œstack æœ€å¤šå„²å­˜å¾ root åˆ°æŸç¯€é»çš„ä¸€æ¢å·¦é‚Šè·¯å¾‘çš„ç¯€é»ï¼Œä¹Ÿå°±æ˜¯é«˜åº¦ã€‚                |

---

## âœï¸ æˆ‘å­¸åˆ°äº†ä»€éº¼ | What I Learned

- ä¸­åºéæ­· BST æ˜¯ä¸€å€‹å¾ˆç›´è§€ä¸”è‡ªç„¶çš„æ–¹æ³•ä¾†æ‰¾åˆ°ç¬¬ k å°çš„å…ƒç´ 

- ç”¨ stack åšè¿­ä»£ç‰ˆæœ¬å¯ä»¥é¿å…éè¿´æ·±åº¦éæ·±æˆ–éè¿´é¢¨éšª

- å¯ä»¥ææ—©åœæ­¢ï¼ˆç•¶ k == 0ï¼‰ï¼Œä¸å¿…å®Œæ•´éæ­·æ•´æ£µæ¨¹ï¼Œæé«˜æ•ˆç‡

- é¢è©¦æ™‚è¬›é€™é¡Œè¦å¼·èª¿ BST çš„ç‰¹æ€§ + ä¸­åºéæ­· + ææ—©é€€å‡º + è¤‡é›œåº¦åˆ†æ