# ğŸ” LeetCode 518 â€” Coin Change II / é›¶éŒ¢å…Œæ› II

ğŸ”— https://leetcode.com/problems/coin-change-ii/

---

## ğŸ“„ é¡Œç›®èªªæ˜ | Problem Description

### ä¸­æ–‡
- çµ¦ amount å’Œ coinsï¼ˆæ¯ç¨®ç¡¬å¹£å¯ç„¡é™ä½¿ç”¨ï¼‰ï¼Œå•æœ‰å¤šå°‘ç¨®ã€Œçµ„åˆã€å¯ä»¥æ¹Šå‡º amountã€‚

çµ„åˆï¼šé †åºä¸é‡è¦ï¼Œä¾‹å¦‚ 1+2 å’Œ 2+1 ç®—åŒä¸€ç¨®ã€‚

### English
- You are given an integer array coins representing coins of different denominations and an integer amount representing a total amount of money.

- Return the number of combinations that make up that amount. If that amount of money cannot be made up by any combination of the coins, return 0.

- You may assume that you have an infinite number of each kind of coin.

- The answer is guaranteed to fit into a signed 32-bit integer.

### Examples
- Example 1:

    - Input: amount = 5, coins = [1,2,5]
    - Output: 4
    - Explanation: there are four ways to make up the amount:
    ```text
    5=5
    5=2+2+1
    5=2+1+1+1
    5=1+1+1+1+1
    ```
- Example 2:

    - Input: amount = 3, coins = [2]
    - Output: 0
    - Explanation: the amount of 3 cannot be made up just with coins of 2.
- Example 3:

    - Input: amount = 10, coins = [10]
    - Output: 1

---

## ğŸ§  è§£é¡Œæ€è·¯ | Solution Idea
### âœ… dp å®šç¾©
ä»¤ï¼šğ‘‘ğ‘[ğ‘¥] = æ¹Šå‡ºé‡‘é¡ğ‘¥çš„çµ„åˆæ•¸
### âœ… è½‰ç§»æ–¹ç¨‹ï¼ˆæ ¸å¿ƒï¼‰

- ç•¶æˆ‘å€‘è™•ç†æŸå€‹ç¡¬å¹£ coin æ™‚ï¼Œå°æ¯å€‹é‡‘é¡ xï¼šdp[x]+=dp[xâˆ’coin]

    - æ„æ€ï¼šè¦æ¹Šåˆ° xï¼Œå¦‚æœæœ€å¾Œæ”¾ä¸€æš coinï¼Œé‚£å‰é¢è¦å…ˆèƒ½æ¹Šåˆ° x-coinã€‚dp[x-coin] æœ‰å¹¾ç¨®æ–¹æ³•ï¼Œå°±å¯ä»¥å»¶ä¼¸å‡ºå¹¾ç¨®æ–°æ–¹æ³•æ¹Šåˆ° xã€‚

### âœ… åˆå§‹åŒ–
- dp[0]=1

    - å› ç‚ºæ¹Šå‡º 0 å…ƒæœ‰ 1 ç¨®æ–¹å¼ï¼šä»€éº¼éƒ½ä¸é¸ï¼ˆé€™æ˜¯æ‰€æœ‰ã€Œçµ„åˆæ•¸ã€DP çš„èµ·é»ï¼‰ã€‚

---

## ğŸ’» ç¨‹å¼ç¢¼å¯¦ä½œ | Code (Python)
```python
from typing import List

class Solution:
    def change(self, amount: int, coins: List[int]) -> int:
        # dp[x] = number of ways to make amount x
        dp = [0] * (amount + 1)

        # Base case: 1 way to make 0 (choose nothing)
        dp[0] = 1

        # Process coins one by one (this ensures combinations, not permutations)
        for coin in coins:
            # Update dp from coin..amount (unbounded usage of coin)
            for x in range(coin, amount + 1):
                dp[x] += dp[x - coin]

        return dp[amount]
```
### 1. å»º dp é™£åˆ—
```python
dp = [0] * (amount + 1)
```
- é•·åº¦æ˜¯ amount+1ï¼Œå› ç‚ºæˆ‘å€‘è¦ç”¨ index 0..amount

- ä¸€é–‹å§‹éƒ½è¨­ 0ï¼šä»£è¡¨ã€Œç›®å‰é‚„æ²’æœ‰ä»»ä½•æ–¹å¼æ¹Šåˆ°é€™äº›é‡‘é¡ã€

### 2. è¨­å®š dp[0]
```python
dp[0] = 1
```

- æ¹Š 0 å…ƒï¼šæœ‰ 1 ç¨®æ–¹æ³•ï¼ˆä¸é¸ä»»ä½•ç¡¬å¹£ï¼‰

- å¾Œé¢æ‰æœ‰è¾¦æ³•å¾ dp[0] ç”Ÿå‡ºå…¶ä»–é‡‘é¡çš„è§£

### 3. å¤–å±¤ forï¼šé€å€‹åŠ å…¥ç¡¬å¹£ç¨®é¡
```python
for coin in coins:
```
- æˆ‘å€‘ç¾åœ¨ã€Œå…è¨±ä½¿ç”¨ã€é€™å€‹ coinï¼ˆä»¥åŠä¹‹å‰å‡ºç¾éçš„ coinï¼‰

- é€™å°±æ˜¯ç‚ºä»€éº¼ç®—çš„æ˜¯ çµ„åˆï¼ˆå› ç‚ºç¡¬å¹£é †åºå›ºå®šï¼Œé¿å…ç®—åˆ°æ’åˆ—ï¼‰

### 4. å…§å±¤ forï¼šæ›´æ–°æ¯å€‹é‡‘é¡
```python
for x in range(coin, amount + 1):
```
- x å¾ coin é–‹å§‹ï¼Œå› ç‚ºï¼š

    - å¦‚æœ x < coinï¼Œä½ ä¸å¯èƒ½ç”¨ coin å»æ¹Š x

- å¾€å³æ›´æ–°åˆ° amount

### 5. æ ¸å¿ƒè½‰ç§»
```python
dp[x] += dp[x - coin]
```
- dp[x]ï¼šç›®å‰æ¹Šåˆ° x çš„æ–¹æ³•æ•¸

- dp[x-coin]ï¼šæ¹Šåˆ° x-coin çš„æ–¹æ³•æ•¸

- æ¯ä¸€ç¨®æ¹Šåˆ° x-coin çš„æ–¹æ³•ï¼Œéƒ½å¯ä»¥ã€Œå†åŠ ä¸€æš coinã€è®Šæˆæ¹Šåˆ° x çš„æ–¹æ³• â†’ æ‰€ä»¥è¦åŠ ä¸Šå»

---

## ğŸ§ª ç¯„ä¾‹ | Example
```text
amount = 5
coins = [1, 2, 5]
```
### Step 0ï¼šåˆå§‹åŒ–
```text
dp = [0,0,0,0,0,0]
dp[0] = 1
dp = [1,0,0,0,0,0]
index: 0 1 2 3 4 5
```
### âœ… å¤–å±¤ coin = 1

å…§å±¤ x è·‘ 1..5

#### x=1
```text
dp[1] += dp[1-1] = dp[0] = 1
dp = [1,1,0,0,0,0]
```
#### x=2
```text
dp[2] += dp[1] = 1
dp = [1,1,1,0,0,0]
```
#### x=3
```text
dp[3] += dp[2] = 1
dp = [1,1,1,1,0,0]
```
#### x=4
```text
dp[4] += dp[3] = 1
dp = [1,1,1,1,1,0]
```
#### x=5
```text
dp[5] += dp[4] = 1
dp = [1,1,1,1,1,1]
```
åªç”¨ 1 å…ƒç¡¬å¹£ï¼Œæ¯å€‹é‡‘é¡éƒ½åªæœ‰ 1 ç¨®æ–¹å¼ã€‚

### âœ… å¤–å±¤ coin = 2

å…§å±¤ x è·‘ 2..5

#### x=2
```text
dp[2] += dp[0] = 1
dp[2] åŸæœ¬æ˜¯ 1 â†’ è®Š 2
dp = [1,1,2,1,1,1]
```
æ¹Š 2ï¼š1+1, 2

#### x=3
```text
dp[3] += dp[1] = 1
dp[3] åŸæœ¬ 1 â†’ è®Š 2
dp = [1,1,2,2,1,1]
```
æ¹Š 3ï¼š1+1+1, 1+2

#### x=4
```text
dp[4] += dp[2] = 2
dp[4] åŸæœ¬ 1 â†’ è®Š 3
dp = [1,1,2,2,3,1]
```
æ¹Š 4ï¼š1+1+1+1, 1+1+2, 2+2

#### x=5
```text
dp[5] += dp[3] = 2
dp[5] åŸæœ¬ 1 â†’ è®Š 3
dp = [1,1,2,2,3,3]
```
æ¹Š 5ï¼ˆç›®å‰åªç”¨ 1 å’Œ 2ï¼‰ï¼š1+1+1+1+1, 1+1+1+2, 1+2+2

### âœ… å¤–å±¤ coin = 5

å…§å±¤ x è·‘ 5..5

#### x=5
```text
dp[5] += dp[0] = 1
dp[5] åŸæœ¬ 3 â†’ è®Š 4
dp = [1,1,2,2,3,4]
```
æ–°å¢çš„é‚£ 1 ç¨®å°±æ˜¯ï¼š5

### âœ… æœ€çµ‚ç­”æ¡ˆ
```text
dp[5] = 4
```
å››ç¨®çµ„åˆï¼š

1. 1+1+1+1+1

2. 1+1+1+2

3. 1+2+2

4. 5

---

## â± è¤‡é›œåº¦åˆ†æ | Complexity

- ä»¤ï¼š

    - n = len(coins)

    - A = amount

### âœ… æ™‚é–“è¤‡é›œåº¦
- å¤–å±¤è¿´åœˆ

    - è·‘ n æ¬¡ï¼ˆæ¯å€‹ coin ä¸€æ¬¡ï¼‰

- å…§å±¤è¿´åœˆ

    - å°æ¯å€‹ coinï¼Œx å¾ coin åˆ° Aï¼Œæœ€å£æƒ…æ³è¿‘ä¼¼è·‘ A æ¬¡

- æ‰€ä»¥ç¸½æ­¥æ•¸å¤§ç´„ï¼šnÃ—A

- å› æ­¤æ™‚é–“è¤‡é›œåº¦ï¼šO(nA)
	â€‹
- ç‚ºä»€éº¼ä¸æ˜¯ O(AÂ²)ï¼Ÿ

    = å› ç‚ºä½ æ²’æœ‰åœ¨æ¯å€‹é‡‘é¡ä¸Šåšã€Œå†æƒä¸€æ¬¡ coinsã€ï¼Œè€Œæ˜¯å›ºå®š coin å¾Œç·šæ€§æƒéé‡‘é¡ä¸€æ¬¡ã€‚

### âœ… ç©ºé–“è¤‡é›œåº¦

- ç”¨äº†ï¼šdp é™£åˆ—é•·åº¦ A+1

- æ‰€ä»¥ç©ºé–“ï¼šO(A)
	â€‹

- é¡å¤–ç©ºé–“ï¼ˆAuxiliary spaceï¼‰

    - é™¤äº† dp ä¹‹å¤–åªæœ‰å¸¸æ•¸è®Šæ•¸ï¼Œå› æ­¤é¡å¤–ç©ºé–“æ˜¯ O(1)ï¼Œä½†é€šå¸¸é€™é¡ŒæœƒæŠŠ dp ç®—é€²å»ï¼Œå¯« O(A)ã€‚

---

## ğŸ”¥ å¸¸è¦‹éŒ¯èª¤ï¼ˆ
1.  è¿´åœˆé †åºå¯«å â†’ æœƒç®—æ’åˆ—
```python
for x in range(amount + 1):
    for coin in coins:
```
æœƒæŠŠ 1+2 å’Œ 2+1 ç®—æˆå…©ç¨®ï¼ˆéŒ¯ï¼‰

2. dp[0] å¿˜äº†è¨­æˆ 1

- æ²’ dp[0]=1ï¼Œä½ æ°¸é ç”Ÿä¸å‡ºä»»ä½•è§£ã€‚

---

## âœï¸ æˆ‘å­¸åˆ°çš„æ±è¥¿ | What I Learned

### 1ï¸âƒ£ dp[0] = 1 çš„çœŸæ­£æ„ç¾©

- é—œéµï¼šdp[0] = 1

- å®ƒä»£è¡¨ï¼šæ¹Šå‡º 0 å…ƒæœ‰ 1 ç¨®æ–¹æ³•ï¼ˆä»€éº¼éƒ½ä¸é¸ï¼‰

- å¦‚æœæ²’æœ‰é€™å€‹åˆå§‹åŒ–ï¼Œå¾Œé¢æ‰€æœ‰çš„ dp[x] += dp[x - coin] éƒ½ç„¡æ³•æ­£ç¢ºç´¯ç©ã€‚

- ğŸ‘‰ åœ¨ã€Œçµ„åˆæ•¸å‹ DPã€ä¸­ï¼Œdp[0] = 1 å¹¾ä¹æ˜¯å›ºå®šæ¨¡æ¿ã€‚

### 2ï¸âƒ£ åŠ æ³•å‹ DP vs æœ€å°å€¼å‹ DP çš„å·®åˆ¥

- 518 æ˜¯ï¼š
```python
dp[x] += dp[x - coin]
```
é€™æ˜¯ã€ŒåŠ æ³•å‹ DPã€ã€‚

è€Œ 322ï¼ˆæœ€å°‘ç¡¬å¹£æ•¸ï¼‰æ˜¯ï¼š
```python
dp[x] = min(dp[x], dp[x - coin] + 1)
```
é€™æ˜¯ã€Œæœ€å°å€¼å‹ DPã€ã€‚

- æˆ‘å­¸æœƒäº†ï¼š

| é¡å‹    | åˆå§‹åŒ–  |
| ----- | ---- |
| è¨ˆç®—æ–¹æ³•æ•¸ | å…¨ 0  |
| æ±‚æœ€å°å€¼  | å…¨ âˆ  |
| æ±‚æœ€å¤§å€¼  | å…¨ -âˆ |


### 3ï¸âƒ£ å­å•é¡Œé‡ç–Šèˆ‡ç´¯ç©æ€æƒ³

- è¦æ¹Šåˆ° xï¼Œä¸éœ€è¦é‡æ–°è¨ˆç®—æ‰€æœ‰çµ„åˆï¼Œåªè¦åˆ©ç”¨å·²ç¶“ç®—å¥½çš„ dp[x - coin]ã€‚

- é€™å°±æ˜¯å‹•æ…‹è¦åŠƒçš„æ ¸å¿ƒï¼š

    - å­å•é¡Œé‡ç–Š

    - é‡ç”¨å·²è¨ˆç®—çµæœ

    - é¿å…æš´åŠ› O(2^n) æˆ– O(n^amount)

### 4ï¸âƒ£ é¡Œå‹æ­¸é¡èƒ½åŠ›æå‡

- é€™é¡Œå±¬æ–¼ï¼šå®Œå…¨èƒŒåŒ…ï¼ˆUnbounded Knapsackï¼‰è¨ˆç®—çµ„åˆæ•¸å•é¡Œ

- æœªä¾†åªè¦çœ‹åˆ°ï¼š

    - æ¯ç¨®å…ƒç´ å¯é‡è¤‡ä½¿ç”¨

    - å•ã€Œå¹¾ç¨®æ–¹æ³•ã€

    - å°±æœƒæƒ³åˆ°é€™å€‹æ¨¡æ¿ã€‚