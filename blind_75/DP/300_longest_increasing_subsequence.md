# ğŸ“ˆ 300. Longest Increasing Subsequence | æœ€é•·éå¢å­åºåˆ—
[LeetCode é¡Œç›®é€£çµ](https://leetcode.com/problems/longest-increasing-subsequence/)

---

## ğŸ§© é¡Œç›®èªªæ˜ | Problem Description

- **ä¸­æ–‡ï¼š**  
  çµ¦å®šä¸€å€‹æ•´æ•¸é™£åˆ— `nums`ï¼Œè«‹æ‰¾å‡ºå…¶ä¸­æœ€é•·çš„ **åš´æ ¼éå¢å­åºåˆ—** é•·åº¦ã€‚é€™å€‹å­åºåˆ—ä¸­çš„å…ƒç´  **ä¸å¿…æ˜¯é€£çºŒçš„**ï¼Œä½†å¿…é ˆç¶­æŒåŸå§‹é †åºã€‚

- **English:**  
  Given an integer array `nums`, return the length of the longest strictly increasing subsequence. The subsequence doesnâ€™t have to be contiguous, but must preserve the original order.

### Examples
- Example 1:

    - Input: nums = [10,9,2,5,3,7,101,18]
    - Output: 4
    - Explanation: The longest increasing subsequence is [2,3,7,101], therefore the length is 4.

- Example 2:

    - Input: nums = [0,1,0,3,2,3]
    - Output: 4

- Example 3:

    - Input: nums = [7,7,7,7,7,7,7]
    - Output: 1

---

## ğŸ§  è§£é¡Œæ€è·¯ | Solution Ideas

### âœ… æ–¹æ³•ä¸€ï¼šå‹•æ…‹è¦åŠƒï¼ˆDPï¼‰ â€” O(nÂ²)
- å»ºç«‹é™£åˆ— `dp`ï¼Œå…¶ä¸­ `dp[i]` è¡¨ç¤ºä»¥ `nums[i]` çµå°¾çš„ LIS é•·åº¦ã€‚
- åˆå§‹åŒ– `dp[i] = 1`ï¼Œå› ç‚ºæ¯å€‹å…ƒç´ è‡³å°‘èƒ½å½¢æˆé•·åº¦ç‚º 1 çš„å­åºåˆ—ã€‚
- å°æ–¼æ¯å€‹ `i`ï¼ˆå¾ 1 åˆ° n-1ï¼‰é€ä¸€æª¢æŸ¥æ‰€æœ‰ `j < i`ï¼š
  - è‹¥ `nums[j] < nums[i]`ï¼Œè¡¨ç¤ºå¯ä»¥æ¥åœ¨éå¢åºåˆ—å¾Œï¼š  
    `dp[i] = max(dp[i], dp[j] + 1)`
- æœ€å¾Œç­”æ¡ˆç‚º `max(dp)`ã€‚

### ğŸ“Œ ç¨‹å¼ç¢¼ï¼š

```python
from typing import List

class Solution:
    def lengthOfLIS(self, nums: List[int]) -> int:
        if not nums:
            return 0
        n = len(nums)
        dp = [1] * n
        for i in range(1, n):
            for j in range(i):
                if nums[j] < nums[i]:
                    dp[i] = max(dp[i], dp[j] + 1)
        return max(dp)
```
```python
n = len(nums)
```
- å–å‡ºé™£åˆ—é•·åº¦ï¼Œæ–¹ä¾¿å¾ŒçºŒä½¿ç”¨ã€‚
```python
dp = [1] * n
```
- å»ºç«‹ä¸€å€‹é•·åº¦ç‚º n çš„ DP é™£åˆ—ï¼Œåˆå§‹å€¼éƒ½è¨­ç‚º 1ã€‚

- dp[i] è¡¨ç¤ºï¼šä»¥ nums[i] ä½œç‚ºçµå°¾çš„æœ€é•·éå¢å­åºåˆ—çš„é•·åº¦ã€‚

- ç‚ºä»€éº¼ä¸€é–‹å§‹éƒ½æ˜¯ 1ï¼Ÿå› ç‚ºæ¯å€‹æ•¸å­—è‡³å°‘å¯ä»¥è‡ªå·±å–®ç¨æˆä¸€å€‹å­åºåˆ—ã€‚
```python
for i in range(1, n):
```
- å¾é ­åˆ°å°¾æª¢æŸ¥æ¯å€‹æ•¸å­— nums[i]ï¼Œå‡è¨­å®ƒæ˜¯å­åºåˆ—çš„æœ€å¾Œä¸€å€‹æ•¸å­—ã€‚
```python
for j in range(i):
```
- ç”¨å¦ä¸€å€‹æŒ‡æ¨™ j å¾ 0 åˆ° i-1ï¼Œæª¢æŸ¥åœ¨ nums[i] ä¹‹å‰çš„æ‰€æœ‰æ•¸å­—ã€‚
```python
if nums[j] < nums[i]:
```
- å¦‚æœå‰é¢çš„æ•¸å­— nums[j] å°æ–¼ç¾åœ¨çš„ nums[i]ï¼Œè¡¨ç¤º nums[i] å¯ä»¥æ¥åœ¨ nums[j] å¾Œé¢ æˆç‚ºä¸€å€‹éå¢å­åºåˆ—ã€‚
```python
dp[i] = max(dp[i], dp[j] + 1)
```
- å¦‚æœ nums[j] < nums[i]ï¼Œè¡¨ç¤ºæˆ‘å€‘å¯ä»¥è€ƒæ…®å¾ dp[j] æ¥çºŒåˆ° iï¼Œæ›´æ–° dp[i] ç‚ºï¼š

    - åŸæœ¬çš„ dp[i]ï¼ˆå¯èƒ½æ˜¯ 1 æˆ–å…¶ä»–ï¼‰

    - æˆ–æ˜¯ dp[j] + 1ï¼ˆå¾ j æ¥éä¾†ï¼‰

- å–å…©è€…æœ€å¤§å€¼ã€‚
```python
return max(dp)
```
- æœ€å¾Œï¼Œå›å‚³æ•´å€‹ dp é™£åˆ—ä¸­æœ€å¤§å€¼ï¼Œä¹Ÿå°±æ˜¯æ•´å€‹é™£åˆ—çš„ æœ€é•·éå¢å­åºåˆ—é•·åº¦ã€‚

### ğŸ§ª ç¯„ä¾‹æ¼”ç·´

ä»¥ nums = [10, 9, 2, 5, 3, 7, 101, 18] ç‚ºä¾‹ï¼š
#### ğŸ“ åˆå§‹ç‹€æ…‹

- dp = [1, 1, 1, 1, 1, 1, 1, 1] æ¯å€‹ä½ç½®åˆå§‹åŒ–ç‚º 1ï¼ˆè‡ªå·±æœ¬èº«å°±æ˜¯é•·åº¦ç‚º 1 çš„éå¢å­åºåˆ—ï¼‰

#### ğŸ”„ åŸ·è¡Œéç¨‹ï¼ˆé€æ­¥ï¼‰
- i = 0

    - ç„¡å‰é¢çš„æ•¸å­—å¯æ¯”ï¼Œç•¥éã€‚

- i = 1

    - j = 0 â†’ 9 < 10 âŒ ä¸æˆç«‹
      âœ dp[1] = 1

- i = 2

    - j = 0 â†’ 2 < 10 âŒ ä¸æˆç«‹

    - j = 1 â†’ 2 < 9 âŒ ä¸æˆç«‹
      âœ dp[2] = 1

- i = 3ï¼ˆ5ï¼‰

    - j = 0 â†’ 5 < 10 âŒ

    - j = 1 â†’ 5 < 9 âŒ

    - j = 2 â†’ 5 > 2 âœ… â†’ dp[3] = max(1, 1+1) = 2
      âœ dp[3] = 2

- i = 4ï¼ˆ3ï¼‰

    - j = 0 â†’ 3 < 10 âŒ

    - j = 1 â†’ 3 < 9 âŒ

    - j = 2 â†’ 3 > 2 âœ… â†’ dp[4] = max(1, 1+1) = 2

    - j = 3 â†’ 3 < 5 âŒ
      âœ dp[4] = 2

- i = 5ï¼ˆ7ï¼‰

    - j = 0 ~ 1 ~ 2 â†’ çš†ä¸æˆç«‹

    - j = 3 â†’ 7 > 5 âœ… â†’ dp[5] = max(1, 2+1) = 3

    - j = 4 â†’ 7 > 3 âœ… â†’ dp[5] = max(3, 2+1) = 3
      âœ dp[5] = 3

- i = 6ï¼ˆ101ï¼‰

    - æœ€é•·å¯ä»¥æ¥åœ¨ 7ï¼ˆdp[5]=3ï¼‰å¾Œé¢ â†’ dp[6] = 4

- i = 7ï¼ˆ18ï¼‰

    - æœ€é•·å¯ä»¥æ¥åœ¨ 7ï¼ˆdp[5]=3ï¼‰å¾Œé¢ â†’ dp[7] = 4
```
æœ€å¾Œå¾—åˆ°ï¼š
```text
dp = [1, 1, 1, 2, 2, 3, 4, 4]
```
æœ€å¤§å€¼æ˜¯ 4ï¼Œæ‰€ä»¥ç­”æ¡ˆæ˜¯ 4

- æœ€é•·éå¢å­åºåˆ—é•·åº¦ç‚º 4ï¼Œå°æ‡‰åºåˆ—å¯èƒ½æ˜¯ï¼š

    - [2, 3, 7, 101]

    - [2, 3, 7, 18]

    - æˆ–å…¶ä»–åŒæ¨£é•·åº¦çš„çµ„åˆ

---

### âš¡ æ–¹æ³•äºŒï¼šäºŒåˆ†æœå°‹å„ªåŒ– â€” O(n log n)

- å»ºç«‹ä¸€å€‹ tails é™£åˆ—è¡¨ç¤ºé•·åº¦ç‚º i+1 çš„éå¢åºåˆ—çš„æœ€å°çµå°¾æ•¸å­—ã€‚

- ä½¿ç”¨ bisect_left æ‰¾åˆ°å¯ä»¥æ›¿æ›çš„ä½ç½®ï¼Œç¢ºä¿çµå°¾è¶Šå°è¶Šå¥½ï¼ˆæœªä¾†å¯å»¶ä¼¸æ€§é«˜ï¼‰ã€‚

### ğŸ“Œ ç¨‹å¼ç¢¼ï¼š
```python
from bisect import bisect_left

class Solution:
    def lengthOfLIS(self, nums: List[int]) -> int:
        tails = []
        for num in nums:
            idx = bisect_left(tails, num)
            if idx == len(tails):
                tails.append(num)
            else:
                tails[idx] = num
        return len(tails)
```
```python
from bisect import bisect_left
```
- åŒ¯å…¥ bisect_leftï¼Œç”¨ä¾†åœ¨æ’åºåˆ—è¡¨ä¸­æ‰¾æ’å…¥é»ã€‚
```python
tails = []
```
- ç”¨ä¾†å„²å­˜æ¯å€‹é•·åº¦çš„ LIS å°¾ç«¯å€¼ï¼Œç¶­æŒéå¢ä¸”ã€Œè¶Šå°è¶Šå¥½ã€ã€‚
```python
for num in nums:
```
- é€å€‹æª¢æŸ¥è¼¸å…¥æ•¸å­—ã€‚
```python
idx = bisect_left(tails, num)
```
- åœ¨ tails ä¸­æ‰¾åˆ°ç¬¬ä¸€å€‹ã€Œå¤§æ–¼ç­‰æ–¼ numã€çš„ indexã€‚

- æ„æ€æ˜¯ï¼šnum å¯ä»¥ç•¶ä½œé€™å€‹é•·åº¦å­åºåˆ—çš„æ›´å„ªçµå°¾ã€‚

- idx = bisect_left(a, x)
    | åƒæ•¸    | èªªæ˜                         |
    | ----- | -------------------------- |
    | `a`   | **å·²æ’åºçš„ list**ï¼ˆå¿…é ˆæ˜¯éå¢åºåˆ—ï¼‰     |
    | `x`   | æƒ³è¦æ’å…¥çš„æ–°å€¼                    |
    | `idx` | å‚³å›ã€Œæ‡‰æ’å…¥çš„ç´¢å¼•ä½ç½®ã€ï¼Œä»¥ä¿æŒ `a` çš„éå¢é †åº |
    - Example
        ```python
        from bisect import bisect_left

        a = [1, 3, 5, 7]
        x = 4

        idx = bisect_left(a, x)
        print(idx)  # ğŸ‘‰ 2
        ```
        - æ’å…¥ x=4 æ‡‰è©²æ”¾åœ¨ç´¢å¼• 2ï¼ˆä»‹æ–¼ 3 å’Œ 5 ä¹‹é–“ï¼‰
        - å› ç‚º a[2] = 5 æ˜¯ç¬¬ä¸€å€‹ â‰¥ 4 çš„ä½ç½®ã€‚
```python
if idx == len(tails):
    tails.append(num)
```
- å¦‚æœ num æ¯” tails ä¸­æ‰€æœ‰æ•¸å­—éƒ½å¤§ï¼Œå°±å»¶é•·å­åºåˆ—é•·åº¦ï¼ŒåŠ å…¥æ–°ä¸€å±¤ã€‚
    - Example
        ```python
        tails = [2, 5, 7]
        num = 8
        ```
        - bisect_left(tails, 8) â†’ æœƒå›å‚³ idx = 3ï¼Œ
        - å› ç‚º 8 æ¯”æ‰€æœ‰å…ƒç´ éƒ½å¤§ï¼Œæ‡‰è©²æ”¾åœ¨æœ€å¾Œä¸€ä½ï¼ˆç´¢å¼• 3ï¼‰ã€‚
        - idx == len(tails) çš„æ„ç¾©
        
        | æ¢ä»¶                  | æ„æ€                        | å‹•ä½œ                  |
        | ------------------- | ------------------------- | ------------------- |
        | `idx == len(tails)` | `num` æ¯” tails ä¸­æ‰€æœ‰å…ƒç´ éƒ½å¤§     | `tails.append(num)` |
        | `idx < len(tails)`  | æœ‰æ›´å¤§çš„æ•¸å­˜åœ¨ï¼Œæ‰¾åˆ°ç¬¬ä¸€å€‹ â‰¥ `num` çš„ä½ç½® | `tails[idx] = num`  |

```python
else:
    tails[idx] = num
```
- å¦å‰‡æ›¿æ›æ‰ä½ç½® idx ä¸Šçš„æ•¸å­—ï¼Œè¡¨ç¤ºã€Œç”¨ä¸€å€‹æ›´å°çš„å€¼æ›´æ–° LIS çš„å°¾ç«¯ã€ã€‚
```python
return len(tails)
```
- tails çš„é•·åº¦å°±æ˜¯ LIS çš„æœ€å¤§é•·åº¦ã€‚

### ğŸ§ª ç¯„ä¾‹æ­¥é©Ÿ

ä»¥ nums = [10,9,2,5,3,7,101,18] ç‚ºä¾‹ï¼š
#### ğŸ” ç¬¬ä¸€æ¬¡ï¼šnum = 10

- tails = []

- bisect_left([], 10) â†’ idx = 0

- idx == len(tails) â†’ tails.append(10)

- âœ… tails = [10]

#### ğŸ” ç¬¬äºŒæ¬¡ï¼šnum = 9

- tails = [10]

- bisect_left([10], 9) â†’ idx = 0

- idx != len(tails) â†’ tails[0] = 9

- âœ… tails = [9]ï¼ˆæ›¿æ›æ‰ 10ï¼Œè®“å°¾å·´æ›´å°ï¼‰

#### ğŸ” ç¬¬ä¸‰æ¬¡ï¼šnum = 2

- tails = [9]

- bisect_left([9], 2) â†’ idx = 0

- tails[0] = 2

- âœ… tails = [2]

#### ğŸ” ç¬¬å››æ¬¡ï¼šnum = 5

- tails = [2]

- bisect_left([2], 5) â†’ idx = 1

- tails.append(5)

- âœ… tails = [2, 5]

#### ğŸ” ç¬¬äº”æ¬¡ï¼šnum = 3

- tails = [2, 5]

- bisect_left([2, 5], 3) â†’ idx = 1

- tails[1] = 3

- âœ… tails = [2, 3]

#### ğŸ” ç¬¬å…­æ¬¡ï¼šnum = 7

- tails = [2, 3]

- bisect_left([2, 3], 7) â†’ idx = 2

- tails.append(7)

- âœ… tails = [2, 3, 7]

#### ğŸ” ç¬¬ä¸ƒæ¬¡ï¼šnum = 101

- tails = [2, 3, 7]

- bisect_left([2, 3, 7], 101) â†’ idx = 3

- tails.append(101)

- âœ… tails = [2, 3, 7, 101]

#### ğŸ” ç¬¬å…«æ¬¡ï¼šnum = 18

- tails = [2, 3, 7, 101]

- bisect_left([2, 3, 7, 101], 18) â†’ idx = 3

- tails[3] = 18

- âœ… tails = [2, 3, 7, 18]

#### âœ… æœ€çµ‚ tails = [2, 3, 7, 18]

- é€™è¡¨ç¤ºç›®å‰æ‰¾åˆ°çš„æœ€é•·éå¢å­åºåˆ—çš„é•·åº¦ç‚º 4

### ğŸ“Œ å„ªé»èˆ‡é—œéµ

- æ¯æ¬¡é¸æ“‡ç•¶å‰èƒ½å»¶ä¼¸çš„æœ€å°çµå°¾ï¼ˆè²ªå¿ƒï¼‰

- ä½¿ç”¨äºŒåˆ†æœå°‹æ‰¾åˆ°æ­£ç¢ºä½ç½® â†’ æ™‚é–“è¤‡é›œåº¦ O(log n)

- tails ä¸ä»£è¡¨å¯¦éš›å­åºåˆ—ï¼Œä½†é•·åº¦æ­£ç¢º

---

## â± è¤‡é›œåº¦åˆ†æ | Time & Space Complexity
| æ–¹æ³•   | æ™‚é–“è¤‡é›œåº¦      | ç©ºé–“è¤‡é›œåº¦ |
| ---- | ---------- | ----- |
| DP   | O(nÂ²)      | O(n)  |
| äºŒåˆ†æœå°‹ | O(n log n) | O(n)  |

---

## ğŸ“š æˆ‘å­¸åˆ°äº†ä»€éº¼ | What I Learned
### ä¸­æ–‡ï¼š

- ç¶“å…¸ DP æ–¹æ³•å¹«åŠ©æˆ‘ç†è§£å¦‚ä½•ç‚ºæ¯å€‹å…ƒç´ ç¶­è­·æœ€é•·åºåˆ—é•·åº¦ã€‚

- äºŒåˆ†æœå°‹æ³•ï¼ˆtails æ¦‚å¿µï¼‰é€éæ§åˆ¶çµå°¾æœ€å°å€¼æå‡æ•ˆç‡ï¼Œç‰¹åˆ¥ç²¾å¦™ã€‚

- LIS æ˜¯å¸¸è¦‹é¢è©¦é¡Œï¼Œç†Ÿæ‚‰å…©ç¨®å¯«æ³•å¾ˆé‡è¦ã€‚

### Englishï¼š

- The DP method provides clarity and easy implementation.

- Binary search optimization introduces tails[], a clever way to track sequence ends efficiently.

- Understanding both approaches helps in both interviews and algorithm thinking.