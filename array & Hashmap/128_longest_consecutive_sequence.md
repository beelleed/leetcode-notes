# ğŸ”¢ LeetCode 128 â€“ Longest Consecutive Sequence
ğŸ”— é¡Œç›®é€£çµï¼š[https://leetcode.com/problems/longest-consecutive-sequence/](https://leetcode.com/problems/longest-consecutive-sequence/)

---

## ğŸ“„ é¡Œç›®èªªæ˜ | Problem Description

**ä¸­æ–‡**ï¼š

çµ¦å®šä¸€å€‹æœªæ’åºçš„æ•´æ•¸é™£åˆ— `nums`ï¼Œè¦æ‰¾å‡ºé™£åˆ—ä¸­èƒ½æ§‹æˆçš„æœ€é•·é€£çºŒæ•´æ•¸åºåˆ—ï¼ˆconsecutive sequenceï¼‰çš„é•·åº¦ã€‚åºåˆ—è£¡çš„æ•¸å­—è¦æ˜¯é€£çºŒçš„æ•´æ•¸ï¼Œä½†åœ¨åŸé™£åˆ—ä¸­ä¸ä¸€å®šæ˜¯é€£çºŒå‡ºç¾çš„ã€‚  

**English**: 

Given an unsorted array of integers `nums`, return the length of the longest sequence of consecutive integers. The numbers in the array can be in any order, but the sequence you count must be of consecutive values (like `4,5,6,7` etc.).

### Examples
- Example 1:

    - Input: nums = [100,4,200,1,3,2]
    - Output: 4
    - Explanation: The longest consecutive elements sequence is [1, 2, 3, 4]. Therefore its length is 4.

- Example 2:

    - Input: nums = [0,3,7,2,5,8,4,6,0,1]
    - Output: 9

- Example 3:

    - Input: nums = [1,0,1,2]
    - Output: 3

---

## ğŸ§  è§£é¡Œæ€è·¯ | Solution Idea

è¦é”åˆ° **O(n)** æ™‚é–“è¤‡é›œåº¦ï¼Œå¸¸è¦‹ä¸”æœ‰æ•ˆçš„æ–¹æ³•æ˜¯ä½¿ç”¨ **é›†åˆï¼ˆSetï¼‰**ï¼š

1. å°‡æ•´å€‹é™£åˆ— `nums` æ”¾é€²ä¸€å€‹ setï¼Œä½¿æŸ¥æ‰¾æŸå€‹æ•¸æ˜¯å¦å­˜åœ¨æˆç‚º O(1) çš„æ“ä½œã€‚  
2. åˆå§‹åŒ–ä¸€å€‹è®Šæ•¸ `longest = 0`ï¼Œç”¨ä¾†å­˜ç›®å‰æ‰¾åˆ°çš„æœ€é•·é€£çºŒåºåˆ—é•·åº¦ã€‚  
3. éæ­· set ä¸­çš„æ¯ä¸€å€‹æ•¸å­— `num`ï¼š  
   - è‹¥ `num - 1` ä¸åœ¨ set ä¸­ â†’ è¡¨ç¤º `num` æ˜¯æŸæ®µé€£çºŒåºåˆ—çš„ *é–‹é ­*ã€‚  
   - å¦‚æœæ˜¯é–‹é ­ï¼Œå°±å¾é€™å€‹ `num` é–‹å§‹å¾€ä¸Šæ•¸ï¼Œæª¢æŸ¥ `num + 1`, `num + 2`... æ˜¯å¦ä¹Ÿåœ¨ set ä¸­ã€‚  
   - è¨ˆç®—é€™æ®µåºåˆ—çš„é•·åº¦ï¼ˆå¾é–‹é ­ `num` é–‹å§‹é€£çºŒåˆ°æŸå€‹ä¸­æ–·çš„é»ï¼‰ã€‚  
   - æ›´æ–° `longest = max(longest, current_length)`ã€‚

é€™æ¨£åšå¯ä»¥ç¢ºä¿æ¯æ®µé€£çºŒåºåˆ—åªå¾å®ƒçš„é–‹é ­ç®—ä¸€æ¬¡ï¼Œé¿å…é‡è¤‡è¨ˆç®—ã€‚

---

## ğŸ’» ç¨‹å¼ç¢¼å¯¦ä½œ | Code

```python
from typing import List

class Solution:
    def longestConsecutive(self, nums: List[int]) -> int:
        if not nums:
            return 0

        num_set = set(nums)
        longest = 0

        for num in num_set:
            # åªæœ‰ç•¶ num æ˜¯æŸæ¢åºåˆ—çš„é–‹é ­æ‰é–‹å§‹å¾€å¾Œæ•¸
            if num - 1 not in num_set:
                current_num = num
                current_streak = 1

                while current_num + 1 in num_set:
                    current_num += 1
                    current_streak += 1

                longest = max(longest, current_streak)

        return longest
```
### æª¢æŸ¥ç©ºé™£åˆ—
```python
if not nums:
    return 0
```
- å¦‚æœ nums æ˜¯ç©ºçš„ï¼ˆæ²’æœ‰å…ƒç´ ï¼‰ï¼Œç›´æ¥å›å‚³ 0ï¼Œå› ç‚ºæ²’æœ‰é€£çºŒåºåˆ—ã€‚

- é€™æ˜¯é‚Šç•Œæ¢ä»¶ï¼ˆedge caseï¼‰çš„è™•ç†ã€‚
### è½‰æˆ Set + åˆå§‹åŒ–è®Šæ•¸
```python
num_set = set(nums)
longest = 0
```
- æŠŠ nums æ”¾é€²ä¸€å€‹ setï¼Œå« num_setã€‚é€™æ¨£åšå¯ä»¥è®“ã€ŒæŸ¥æŸå€‹å…ƒç´ æ˜¯å¦å­˜åœ¨ã€æ˜¯ O(1) çš„æ™‚é–“è¤‡é›œåº¦ã€‚

- longest ç”¨ä¾†å„²å­˜ç›®å‰æ‰¾åˆ°çš„æœ€é•·é€£çºŒåºåˆ—çš„é•·åº¦ã€‚
### éæ­·é›†åˆä¸­çš„æ¯ä¸€å€‹æ•¸å­—
```python
for num in num_set:
    if num - 1 not in num_set:
```
- éæ­· set ä¸­çš„æ¯å€‹ numã€‚

- if num - 1 not in num_set: é€™è¡Œéå¸¸é—œéµï¼šåªå°é‚£äº› æ²’æœ‰å‰ä¸€å€‹é€£çºŒæ•¸å­— çš„ num åŸ·è¡Œã€Œå¾€å¾Œæ•¸ã€çš„å‹•ä½œï¼Œé€™æ¨£å¯ä»¥ç¢ºä¿æ¯æ¢é€£çºŒåºåˆ—åªã€Œå¾é ­ã€è¢«è¨ˆç®—ä¸€æ¬¡ï¼Œé¿å…é‡è¤‡ã€‚

### å¾é€™å€‹èµ·é»å¾€å¾Œæ•¸ï¼ˆè¨ˆç®—é€£çºŒåºåˆ—çš„é•·åº¦ï¼‰
```python
current_num = num
current_streak = 1

while current_num + 1 in num_set:
    current_num += 1
    current_streak += 1
```
- current_num å¾ num é–‹å§‹ï¼Œè¡¨ç¤ºåºåˆ—ä¸­çš„ç•¶å‰æ•¸å­—ã€‚

- current_streak è¡¨ç¤ºå¾é€™å€‹èµ·å§‹é»åˆ°ç›®å‰ç‚ºæ­¢çš„é€£çºŒé•·åº¦ï¼ˆè‡³å°‘ 1ï¼Œå› ç‚ºèµ·é»è‡ªå·±ç®—ä¸€å€‹ï¼‰ã€‚

- while current_num + 1 in num_set: é€™å€‹è¿´åœˆä¸€ç›´å¾€å¾Œæª¢æŸ¥ current_num+1, current_num+2, ... æ˜¯å¦å­˜åœ¨æ–¼ setã€‚

- æ¯æ¬¡å­˜åœ¨å°±æŠŠ current_num åŠ  1ï¼Œcurrent_streak åŠ  1ã€‚

---

### æ›´æ–°æœ€é•·ç´€éŒ„
```python
longest = max(longest, current_streak)
```
- ç”¨ max æ¯”è¼ƒç›®å‰é€™æ¢é€£çºŒåºåˆ—çš„é•·åº¦ (current_streak) èˆ‡éå»ç´€éŒ„çš„ longestï¼Œæ›´æ–° longest ç‚ºè¼ƒå¤§å€¼ã€‚

### æœ€å¾Œå›å‚³ç­”æ¡ˆ
```python
return longest
```
- ç•¶æ‰€æœ‰å¯èƒ½çš„èµ·é»éƒ½è¨ˆç®—éå¾Œï¼Œlongest å°±æ˜¯æ•´å€‹é™£åˆ—ä¸­å¯ä»¥å½¢æˆçš„æœ€é•·é€£çºŒåºåˆ—çš„é•·åº¦ã€‚

---

## ğŸ§ª ç¯„ä¾‹æµç¨‹

å‡è¨­è¼¸å…¥ï¼š
```python
nums = [100, 4, 200, 1, 3, 2]
```
1. nums ä¸ç©º â†’ ç¹¼çºŒ

2. num_set = {100, 4, 200, 1, 3, 2}ï¼Œlongest = 0

3. éæ­· num_set ä¸­çš„å…ƒç´ ï¼ˆé †åºå¯ä»¥æ˜¯ä»»æ„ï¼Œä½†çµæœä¸€æ¨£ï¼‰ï¼š

    - æ¯”å¦‚å…ˆçœ‹ num = 1ï¼šæª¢æŸ¥ 0 æ˜¯å¦å­˜åœ¨ï¼Ÿä¸å­˜åœ¨ â†’ è¡¨ç¤ºåºåˆ—å¾ 1 é–‹å§‹å¾€å¾Œæª¢æŸ¥ 2,3,4,5... â†’ 2 å­˜åœ¨ â†’ current_streak = 2 â†’ 3 å­˜åœ¨ â†’ 3ï¼›4 å­˜åœ¨ â†’ 4ï¼›5 ä¸å­˜åœ¨ â†’ åœï¼›æ›´æ–° longest = max(0,4) = 4

    - æ¥è‘—çœ‹ num = 2ï¼šä½† 1 å­˜åœ¨ â†’ æ‰€ä»¥è·³éï¼Œä¸åšå¾ 2 é–‹å§‹è¨ˆç®—çš„å‹•ä½œï¼ˆå› ç‚ºé€™æ¢åºåˆ—å·²ç¶“å¾ 1 è¢«ç®—éï¼‰

    - çœ‹ num = 100ï¼š99 ä¸å­˜åœ¨ â†’ å¾ 100 é–‹å§‹åºåˆ—é•·åº¦è‡³å°‘ 1ï¼Œå¾€å¾Œæª¢æŸ¥ 101ï¼ˆä¸å­˜åœ¨ï¼‰â†’ current_streak = 1ï¼Œæ›´æ–° longest = max(4,1) = 4

    - çœ‹ num = 200ï¼šåŒæ¨£å¾ 200 é–‹å§‹ â†’ current_streak = 1 â†’ longest ä»ç„¶ 4

4. æ‰€æœ‰å…ƒç´ éƒ½æª¢æŸ¥å®Œ â†’ å›å‚³ 4

---

## â± è¤‡é›œåº¦åˆ†æ | Time & Space Complexity
| åˆ†é¡        | è¤‡é›œåº¦                                                                                                                                        |
| --------- | ------------------------------------------------------------------------------------------------------------------------------------------ |
| **æ™‚é–“è¤‡é›œåº¦** | **O(n)**ï¼Œn æ˜¯ `nums` çš„é•·åº¦ã€‚åŸå› æ˜¯ï¼šæŠŠæ‰€æœ‰å…ƒç´ æ”¾ set æ˜¯ O(n)ï¼Œç„¶å¾Œéæ­·æ¯å€‹å…ƒç´ ã€‚å°æ¯å€‹å…ƒç´ ï¼Œåªæœ‰ç•¶å®ƒæ˜¯åºåˆ—é–‹é ­æ™‚æ‰é€²ä¸€æ­¥åš while å¾€å¾Œæª¢æŸ¥ï¼Œæ•´é«”æ¯å€‹å…ƒç´ æœ€å¤šè¢« `while current_num + 1 in num_set` æª¢æŸ¥ä¸€æ¬¡ã€‚ |
| **ç©ºé–“è¤‡é›œåº¦** | **O(n)**ï¼Œå› ç‚ºè¦å­˜ `num_set`ï¼Œè£¡é¢å¯èƒ½å­˜æ‰€æœ‰å…ƒç´ ã€‚é‚„æœ‰ä¸€äº›è®Šæ•¸ä½”ç”¨ç©ºé–“ä¹Ÿç‚º O(1)ï¼Œä½†ç¸½é«”æ˜¯ O(n)ã€‚                                                                             |

---

## âœï¸ æˆ‘å­¸åˆ°äº†ä»€éº¼ | What I Learned

- åˆ©ç”¨ set çš„æŸ¥è©¢ O(1) çš„ç‰¹æ€§ï¼Œå¯ä»¥é¿å…æ’åºä¸¦ç¶­æŒæ™‚é–“è¤‡é›œåº¦ç‚º O(n)ã€‚

- é—œéµé»åœ¨è¦ã€Œåªåœ¨ä¸€å€‹åºåˆ—çš„é–‹é ­ã€æ™‚æ‰å±•é–‹å¾€å¾Œæª¢æŸ¥ï¼Œé¿å…é‡è¤‡è¨ˆç®—ã€‚

- ç‰¹æ®Šæƒ…æ³è¦æ³¨æ„ï¼šç©ºé™£åˆ—ã€å…¨éƒ¨å…ƒç´ ç›¸åŒã€å¾ˆå¤§ç¯„åœä½†ä¸é€£çºŒçš„æ•¸å­—ã€‚

- é¢è©¦ä¸­è¬›é€™é¡Œè¦å¼·èª¿ç‚ºä»€éº¼èƒ½åšåˆ° O(n)ï¼šå› ç‚ºæ²’æ’åºã€æ¯å€‹å…ƒç´ æª¢æŸ¥æ¬¡æ•¸æœ‰é™ã€‚